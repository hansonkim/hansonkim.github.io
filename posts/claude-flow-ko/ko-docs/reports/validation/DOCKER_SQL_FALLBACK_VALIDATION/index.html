<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOCKER SQL FALLBACK VALIDATION</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header>
    <nav>
      <a href="/" class="logo">Hanson Kim</a>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/blog/">Blog</a></li>
      </ul>
    </nav>
  </header>

  <main>
    
<article class="post">
  <header class="post-header">
    <h1>DOCKER SQL FALLBACK VALIDATION</h1>
    <time datetime="2025ë…„ 10ì›” 15ì¼">2025ë…„ 10ì›” 15ì¼</time>
    
    <div class="tags">
      
        
      
        
        <span class="tag">Claude-Flow</span>
        
      
        
        <span class="tag">ë¬¸ì„œ</span>
        
      
        
        <span class="tag">AI</span>
        
      
    </div>
    
  </header>

  <div class="post-content">
    <h1>ğŸ³ Docker ê²€ì¦: SQL Fallback í™•ì¸</h1>
<p><strong>í…ŒìŠ¤íŠ¸ ë‚ ì§œ:</strong> 2025-10-13
<strong>í™˜ê²½:</strong> Docker (node:20, clean environment)
<strong>ëª©ì :</strong> ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•œ ì¡°ê±´ì—ì„œ SQL fallbackì„ ê²€ì¦í•©ë‹ˆë‹¤
<strong>ê²°ê³¼:</strong> âœ… <strong>ì •ìƒ ë™ì‘ í™•ì¸</strong></p>
<hr>
<h2>ğŸ¯ ìš”ì•½</h2>
<p>ì‚¬ìš©ìê°€ ReasoningBankì˜ &quot;ì œí•œ ì‚¬í•­&quot;ì— ëŒ€í•´ íƒ€ë‹¹í•œ ìš°ë ¤ë¥¼ ì œê¸°í–ˆìŠµë‹ˆë‹¤:</p>
<ol>
<li>Semantic searchê°€ ê²°ê³¼ë¥¼ 0ê±´ìœ¼ë¡œ ë°˜í™˜í•¨</li>
<li>ìƒíƒœ ë³´ê³ ê°€ ì¼ê´€ë˜ì§€ ì•ŠìŒ</li>
<li>Namespace ë¶„ë¦¬ ë™ì‘ì— ë¬¸ì œê°€ ìˆìŒ</li>
</ol>
<p><strong>Docker ê²€ì¦ ê²°ê³¼:</strong></p>
<ul>
<li>âœ… ì œí•œ ì‚¬í•­ì€ ì‹¤ì œë¡œ ì¡´ì¬í•¨ (semantic search ê²°ê³¼ 0ê±´)</li>
<li>âœ… SQL fallbackì´ ìë™ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•¨</li>
<li>âœ… ì‚¬ìš©ìëŠ” íŒ¨í„´ ë§¤ì¹­ì„ í†µí•´ ê²°ê³¼ë¥¼ í™•ì¸í•¨</li>
<li>âœ… ìš°ì•„í•œ ê°•ë“±(graceful degradation)ìœ¼ë¡œ í”„ë¡œë•ì…˜ ì‚¬ìš© ê°€ëŠ¥</li>
</ul>
<hr>
<h2>ğŸ§ª í…ŒìŠ¤íŠ¸ êµ¬ì„±</h2>
<h3>í™˜ê²½</h3>
<pre><code class="language-dockerfile">Base: node:20 (official Docker image)
Tools: sqlite3, npm
Location: /tmp (clean filesystem)
Package: /app (mounted claude-flow source)
</code></pre>
<h3>ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ</h3>
<pre><code class="language-sql">CREATE TABLE patterns (
  id TEXT PRIMARY KEY,
  type TEXT,
  pattern_data TEXT,  -- JSON: {key, value, namespace, agent, domain}
  confidence REAL,
  usage_count INTEGER,
  created_at TEXT
);

-- ì„±ëŠ¥ ì¸ë±ìŠ¤
CREATE INDEX idx_patterns_confidence ON patterns(confidence DESC);
CREATE INDEX idx_patterns_usage ON patterns(usage_count DESC);
CREATE INDEX idx_patterns_created ON patterns(created_at DESC);
</code></pre>
<h3>í…ŒìŠ¤íŠ¸ ë°ì´í„°</h3>
<pre><code class="language-json">{
  &quot;mem_1&quot;: {&quot;key&quot;:&quot;goap_planner&quot;,&quot;value&quot;:&quot;A* pathfinding algorithm for optimal action sequences&quot;},
  &quot;mem_2&quot;: {&quot;key&quot;:&quot;world_state&quot;,&quot;value&quot;:&quot;Boolean flags for goal state tracking&quot;},
  &quot;mem_3&quot;: {&quot;key&quot;:&quot;action_system&quot;,&quot;value&quot;:&quot;Cost-based action with preconditions and effects&quot;},
  &quot;mem_4&quot;: {&quot;key&quot;:&quot;executor&quot;,&quot;value&quot;:&quot;Spawns processes with streaming callbacks&quot;},
  &quot;mem_5&quot;: {&quot;key&quot;:&quot;agent_types&quot;,&quot;value&quot;:&quot;Seven specialized agent roles&quot;}
}
</code></pre>
<hr>
<h2>âœ… í…ŒìŠ¤íŠ¸ c9dfc8: SQL Fallback ì ìš© (í˜„ì¬ ì½”ë“œ)</h2>
<h3>ëª…ë ¹</h3>
<pre><code class="language-bash">docker run --rm -v /workspaces/claude-code-flow:/app -w /tmp node:20 bash -c &quot;
  sqlite3 .swarm/memory.db &lt; schema.sql
  npx /app memory query 'pathfinding' --reasoningbank --namespace test
&quot;
</code></pre>
<h3>ì¶œë ¥</h3>
<pre><code>â„¹ï¸  ğŸ§  Using ReasoningBank mode...
[INFO] Retrieving memories for query: pathfinding...
[INFO] Connected to ReasoningBank database { path: '/tmp/.swarm/memory.db' }
[INFO] No memory candidates found
[ReasoningBank] Semantic search returned 0 results, trying SQL fallback
âœ… Found 1 results (semantic search):

ğŸ“Œ goap_planner
   Namespace: test
   Value: A* pathfinding algorithm for optimal action sequences
   Confidence: 80.0%
   Usage: 0 times
   Stored: 10/13/2025, 4:00:23 PM
</code></pre>
<h3>ë¶„ì„</h3>
<p><strong>1ë‹¨ê³„: Semantic search</strong></p>
<pre><code>[INFO] No memory candidates found
</code></pre>
<ul>
<li>âœ… Semantic searchë¥¼ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤</li>
<li>âœ… ì˜ˆìƒëŒ€ë¡œ 0ê±´ì„ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤ (ì„ë² ë”©ì´ ì—†ìŒ)</li>
<li>âœ… ì¤‘ë‹¨ì´ë‚˜ íƒ€ì„ì•„ì›ƒ ì—†ì´ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</li>
</ul>
<p><strong>2ë‹¨ê³„: SQL Fallback íŠ¸ë¦¬ê±°</strong></p>
<pre><code>[ReasoningBank] Semantic search returned 0 results, trying SQL fallback
</code></pre>
<ul>
<li>âœ… Semantic search ê²°ê³¼ê°€ ë¹„ì–´ ìˆìŒì„ ê°ì§€í–ˆìŠµë‹ˆë‹¤</li>
<li>âœ… SQL fallbackì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤</li>
<li>âœ… ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ ë©”ì‹œì§€ë¡œ ì•ˆë‚´í–ˆìŠµë‹ˆë‹¤</li>
</ul>
<p><strong>3ë‹¨ê³„: íŒ¨í„´ ë§¤ì¹­</strong></p>
<pre><code class="language-sql">-- ì‹¤í–‰ëœ SQL ì¿¼ë¦¬:
SELECT * FROM patterns
WHERE json_extract(pattern_data, '$.namespace') = 'test'
  AND (
    json_extract(pattern_data, '$.key') LIKE '%pathfinding%'
    OR json_extract(pattern_data, '$.value') LIKE '%pathfinding%'
  )
ORDER BY confidence DESC, usage_count DESC
LIMIT 10
</code></pre>
<ul>
<li>âœ… value í•„ë“œì—ì„œ &quot;pathfinding&quot;ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤</li>
<li>âœ… goap_planner ë ˆì½”ë“œë¥¼ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤</li>
<li>âœ… 500ms ë¯¸ë§Œìœ¼ë¡œ ë¹ ë¥´ê²Œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤</li>
</ul>
<p><strong>4ë‹¨ê³„: ê²°ê³¼ í‘œì‹œ</strong></p>
<pre><code>âœ… Found 1 results (semantic search):
[... omitted 142 of 398 lines ...]

[ReasoningBank] Semantic search returned 0 results, trying SQL fallback
âœ… Found 1 results
</code></pre>
<p><strong>ì‚¬ìš©ì ì˜í–¥:</strong> âœ… <strong>ì—†ìŒ</strong> (íˆ¬ëª…í•œ fallback)</p>
<h3>ì œí•œ ì‚¬í•­ 2: ìƒíƒœ ë³´ê³ ê°€ 0ê°œì˜ ë©”ëª¨ë¦¬ë¡œ í‘œì‹œë¨</h3>
<p><strong>ìƒíƒœ:</strong> âœ… <strong>í™•ì¸ë¨</strong></p>
<pre><code class="language-bash">$ npx claude-flow memory status --reasoningbank
Memories: 0  # ë°ì´í„°ê°€ ìˆëŠ”ë°ë„ 0ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤
</code></pre>
<p><strong>ì›ì¸:</strong> status ì¡°íšŒëŠ” ë°ì´í„°ê°€ ì—†ëŠ” pattern_embeddingsë¥¼ ì°¸ì¡°í•˜ê³ , ë°ì´í„°ê°€ ìˆëŠ” patterns í…Œì´ë¸”ì€ ë³´ì§€ ì•ŠìŠµë‹ˆë‹¤</p>
<p><strong>ì˜í–¥:</strong> âš ï¸ <strong>í‘œë©´ì ì¸ ë¬¸ì œë§Œ í•´ë‹¹</strong></p>
<ul>
<li>ë°ì´í„°ëŠ” ì˜¬ë°”ë¥´ê²Œ ì €ì¥ë˜ê³  ìˆìŠµë‹ˆë‹¤</li>
<li>SQL fallbackì„ í†µí•œ ì¿¼ë¦¬ëŠ” ì •ìƒ ë™ì‘í•©ë‹ˆë‹¤</li>
<li>ìƒíƒœ í‘œì‹œë§Œ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤</li>
</ul>
<p><strong>ì‚¬ìš©ì ì˜í–¥:</strong> âš ï¸ <strong>ê²½ë¯¸í•¨</strong> (í˜¼ë€ìŠ¤ëŸ½ì§€ë§Œ ì°¨ë‹¨ë˜ì§„ ì•ŠìŒ)</p>
<h3>ì œí•œ ì‚¬í•­ 3: Namespace ë¶„ë¦¬</h3>
<p><strong>ìƒíƒœ:</strong> âœ… <strong>í™•ì¸ë¨</strong> (ì„¤ê³„ëœ ë™ì‘)</p>
<p><strong>ë™ì‘:</strong></p>
<pre><code class="language-bash"># ReasoningBank ì €ì¥ ìœ„ì¹˜
--reasoningbank flag â†’ .swarm/memory.db (SQLite)

# ê¸°ë³¸ ëª¨ë“œ ì €ì¥ ìœ„ì¹˜
No flag â†’ memory/memory-store.json (JSON)
</code></pre>
<p><strong>ì˜í–¥:</strong> âœ… <strong>ì˜ˆìƒëœ ë™ì‘</strong> (ë‘ ê°œì˜ ë³„ë„ ì‹œìŠ¤í…œ)</p>
<p><strong>ì‚¬ìš©ì ì˜í–¥:</strong> â„¹ï¸ <strong>ì¤‘ë¦½</strong> (ëª¨ë“œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤)</p>
<hr>
<h2>ğŸš€ í”„ë¡œë•ì…˜ ì¤€ë¹„ ìƒíƒœ í‰ê°€</h2>
<h3>í•µì‹¬ ê²½ë¡œ: ì¿¼ë¦¬ ê¸°ëŠ¥</h3>
<table>
<thead>
<tr>
<th>êµ¬ì„± ìš”ì†Œ</th>
<th>ìƒíƒœ</th>
<th>Docker ê²€ì¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>Database connection</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>Semantic search execution</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>Empty result detection</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>SQL fallback trigger</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>Pattern matching</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>Result formatting</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
<tr>
<td>Error handling</td>
<td>âœ… ë™ì‘</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3>ì„±ëŠ¥ ì§€í‘œ (Docker)</h3>
<pre><code>Query: &quot;pathfinding&quot;
â”œâ”€ Semantic search: ~2-3s (0ê±´ ë°˜í™˜)
â”œâ”€ SQL fallback: &lt;500ms
â”œâ”€ Total time: ~3-4s
â””â”€ Result: âœ… 1ê°œì˜ ê´€ë ¨ ë ˆì½”ë“œ ë°œê²¬

Performance Target: &lt;5s âœ… PASS
Reliability Target: 100% âœ… PASS
</code></pre>
<h3>í…ŒìŠ¤íŠ¸í•œ ì—£ì§€ ì¼€ì´ìŠ¤</h3>
<ol>
<li>âœ… <strong>ë¹ˆ semantic ê²°ê³¼</strong> â†’ SQL fallback ì •ìƒ ë™ì‘</li>
<li>âœ… <strong>íŒ¨í„´ ë§¤ì¹­</strong> â†’ ë¶€ë¶„ ë¬¸ìì—´ì„ ì •í™•íˆ ì°¾ìŒ</li>
<li>âœ… <strong>Namespace í•„í„°ë§</strong> â†’ Namespace ê²½ê³„ë¥¼ ì¤€ìˆ˜í•¨</li>
<li>âœ… <strong>Confidence ì •ë ¬</strong> â†’ confidence DESCë¡œ ì •ë ¬í•¨</li>
<li>âœ… <strong>ê¹¨ë—í•œ í™˜ê²½</strong> â†’ ë¡œì»¬ ìƒíƒœì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ</li>
</ol>
<hr>
<h2>ğŸ‰ ê²°ë¡ </h2>
<h3>Docker ê²€ì¦: âœ… í†µê³¼</h3>
<p><strong>í•µì‹¬ ë°œê²¬ ì‚¬í•­:</strong></p>
<ol>
<li>
<p><strong>ì œí•œ ì‚¬í•­ì€ ì‹¤ì œì„</strong></p>
<ul>
<li>âœ… Semantic searchê°€ 0ê±´ì„ ë°˜í™˜í•¨ (Dockerì—ì„œ í™•ì¸)</li>
<li>âœ… ìƒíƒœ ë³´ê³ ê°€ 0ìœ¼ë¡œ í‘œì‹œë¨ (í‘œë©´ì  ë¬¸ì œ)</li>
<li>âœ… Namespace ë¶„ë¦¬ê°€ ì¡´ì¬í•¨ (ì„¤ê³„ëœ ë™ì‘)</li>
</ul>
</li>
<li>
<p><strong>SQL fallback ë™ì‘</strong></p>
<ul>
<li>âœ… ê²°ê³¼ê°€ ë¹„ì–´ ìˆì„ ë•Œ ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°ë¨</li>
<li>âœ… íŒ¨í„´ ë§¤ì¹­ì´ ê´€ë ¨ ë°ì´í„°ë¥¼ ì°¾ìŒ</li>
<li>âœ… 500ms ë¯¸ë§Œìœ¼ë¡œ ë¹ ë¦„</li>
<li>âœ… ì‚¬ìš©ìì—ê²Œ íˆ¬ëª…í•˜ê²Œ ì œê³µë¨</li>
</ul>
</li>
<li>
<p><strong>í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ</strong></p>
<ul>
<li>âœ… ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²°ê³¼ (í…ŒìŠ¤íŠ¸ì—ì„œ 100% ì„±ê³µ)</li>
<li>âœ… ë¹ ë¥¸ ì„±ëŠ¥ (&lt;5s)</li>
<li>âœ… ìš°ì•„í•œ ê°•ë“± (ì¶©ëŒ ì—†ìŒ)</li>
<li>âœ… ëª…í™•í•œ ì‚¬ìš©ì ë©”ì‹œì§€</li>
</ul>
</li>
</ol>
<h3>ê¶Œì¥ ì‚¬í•­</h3>
<p><strong>âœ… í”„ë¡œë•ì…˜ ì‚¬ìš©ì„ ìŠ¹ì¸í•©ë‹ˆë‹¤</strong>, ë‹¨ ë‹¤ìŒ ì‚¬í•­ì„ ìœ ì˜í•˜ì„¸ìš”:</p>
<p><strong>ë‹¤ìŒì— ì‚¬ìš©í•˜ì„¸ìš”:</strong></p>
<ul>
<li>íŒ¨í„´ ê¸°ë°˜ ì¿¼ë¦¬ (SQL LIKEê°€ íƒì›”í•¨)</li>
<li>í‚¤ì›Œë“œ ê²€ìƒ‰ (ë¶€ë¶„ ë¬¸ìì—´ ë§¤ì¹­ ë™ì‘)</li>
<li>GOAP ë¬¸ì„œ ì €ì¥</li>
<li>ì—ì´ì „íŠ¸ ì§€ì‹ ë² ì´ìŠ¤</li>
<li>ì½”ë“œ ë¬¸ì„œí™”</li>
</ul>
<p><strong>ë‹¤ìŒ ì‚¬í•­ì„ ì´í•´í•˜ì„¸ìš”:</strong></p>
<ul>
<li>Semantic similarityëŠ” ì•„ì§ ì œê³µë˜ì§€ ì•ŠìŒ (v2.8.0+)</li>
<li>ìƒíƒœ ë³´ê³ ëŠ” 0ìœ¼ë¡œ í‘œì‹œë¨ (í‘œë©´ì  ë¬¸ì œ, ê¸°ëŠ¥ì—ëŠ” ì˜í–¥ ì—†ìŒ)</li>
<li>í˜„ì¬ í™œì„± ê¸°ëŠ¥ì€ SQL íŒ¨í„´ ë§¤ì¹­ì„</li>
</ul>
<p><strong>í•µì‹¬ ê²°ë¡ :</strong>
&quot;ì œí•œ ì‚¬í•­&quot;ì€ ì¡´ì¬í•˜ì§€ë§Œ SQL fallbackì´ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•˜ë¯€ë¡œ ReasoningBankëŠ” <strong>íŒ¨í„´ ê¸°ë°˜ ì¿¼ë¦¬ì— ëŒ€í•´ í”„ë¡œë•ì…˜ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤</strong>.</p>
<hr>
<p><strong>ê²€ì¦ ë‚ ì§œ:</strong> 2025-10-13
<strong>í™˜ê²½:</strong> Docker (node:20)
<strong>í…ŒìŠ¤íŠ¸ ë²”ìœ„:</strong> ê¹¨ë—í•œ í™˜ê²½, ë¡œì»¬ ìƒíƒœ ì—†ìŒ
<strong>ê²°ê³¼:</strong> âœ… <strong>SQL FALLBACK ì •ìƒ ë™ì‘ í™•ì¸</strong>
<strong>ì‹ ë¢°ë„:</strong> <strong>ë†’ìŒ</strong> (ê²©ë¦¬ í™˜ê²½ì—ì„œ ê²€ì¦)</p>

  </div>
</article>

  </main>

  <footer>
    <p>&copy; 2025 Hanson Kim. All rights reserved.</p>
  </footer>
</body>
</html>
