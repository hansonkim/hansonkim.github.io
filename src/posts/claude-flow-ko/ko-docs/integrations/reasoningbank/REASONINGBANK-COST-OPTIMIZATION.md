# ReasoningBank ë¹„ìš© ìµœì í™” ê°€ì´ë“œ

## ğŸ’° ë¬¸ì œì 

ReasoningBankì€ ì‘ì—…ë§ˆë‹¤ LLM í˜¸ì¶œì„ ë‘ ë²ˆ ì¶”ê°€í•©ë‹ˆë‹¤:
- **Judge** (6~7ì´ˆ): ì‘ì—…ì´ ì„±ê³µí–ˆëŠ”ì§€ í‰ê°€í•©ë‹ˆë‹¤
- **Distill** (12~15ì´ˆ): í•™ìŠµ ê°€ëŠ¥í•œ íŒ¨í„´ì„ ì¶”ì¶œí•©ë‹ˆë‹¤

Claude 3.5 Sonnetì„ ì‚¬ìš©í•  ê²½ìš° ì‘ì—…ë‹¹ **ì•½ $0.15~0.17**ì˜ ë¹„ìš©ì´ ì¶”ê°€ë˜ì–´ 75%ì˜ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤.

## ğŸ¯ ë¹„ìš© êµ¬ì„± (Anthropic ê¸°ë³¸ê°’)

```
ì£¼ìš” ì‘ì—…:     $0.20 (Claude 3.5 Sonnet - ì‹¤ì œ ì‘ì—…)
Judge:         $0.05 (Claude 3.5 Sonnet - 512 tokens)
Distill:       $0.10 (Claude 3.5 Sonnet - 2048 tokens)
ì„ë² ë”©:        $0.02 (Claude - ë²¡í„° ìƒì„±)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´í•©:          ì‘ì—…ë‹¹ $0.37 (ë©”ëª¨ë¦¬ ì‚¬ìš© ì‹œ)
ë¯¸ì‚¬ìš© ì‹œ:     ì‘ì—…ë‹¹ $0.20 (85% ë” ë¹„ìŒˆ!)
```

## âœ… í•´ê²°ì±…: í’ˆì§ˆê³¼ ë¹„ìš©ì˜ ê· í˜•

**ì „ëµ:** ì£¼ìš” ì‘ì—…ì€ Claudeë¡œ ìœ ì§€í•˜ê³ , Judge/Distillì—ëŠ” ì €ë ´í•œ ëª¨ë¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ì˜µì…˜ 1: OpenRouter DeepSeek (ê¶Œì¥)

```yaml
# .swarm/reasoningbank.yaml
reasoningbank:
  judge:
    model: "deepseek/deepseek-r1"      # ì‘ì—…ë‹¹ $0.001 (99% ì €ë ´)
    max_tokens: 512
    temperature: 0

  distill:
    model: "deepseek/deepseek-r1"      # ì‘ì—…ë‹¹ $0.002 (99% ì €ë ´)
    max_tokens: 2048
    temperature: 0.3

  embeddings:
    provider: "openrouter"
    model: "deepseek/deepseek-r1"      # ì‘ì—…ë‹¹ $0.0005
    dimensions: 1024
```

**ìƒˆë¡œìš´ ë¹„ìš©:**
```
ì£¼ìš” ì‘ì—…:     $0.20 (Claude - í’ˆì§ˆ ìœ ì§€)
Judge:         $0.001 (DeepSeek R1)
Distill:       $0.002 (DeepSeek R1)
ì„ë² ë”©:        $0.0005 (DeepSeek)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´í•©:          ì‘ì—…ë‹¹ $0.20 (ë©”ëª¨ë¦¬ ë¯¸ì‚¬ìš© ìˆ˜ì¤€ê³¼ ë™ì¼)
ì ˆê°ì•¡:        ì‘ì—…ë‹¹ $0.17 ì ˆê° (ì´ 46% ì ˆê°)
```

### ì˜µì…˜ 2: Google Gemini ë¬´ë£Œ í‹°ì–´

```yaml
reasoningbank:
  judge:
    model: "gemini-2.5-flash"          # ë¬´ë£Œ (ì œí•œ ìˆìŒ)
    max_tokens: 512

  distill:
    model: "gemini-2.5-flash"          # ë¬´ë£Œ (ì œí•œ ìˆìŒ)
    max_tokens: 2048

  embeddings:
    provider: "gemini"
    model: "gemini-2.5-flash"          # ë¬´ë£Œ
```

**ìƒˆë¡œìš´ ë¹„ìš©:**
```
ì£¼ìš” ì‘ì—…:     $0.20 (Claude)
Judge:         $0.00 (Gemini ë¬´ë£Œ í‹°ì–´: 1500 RPD)
Distill:       $0.00 (Gemini ë¬´ë£Œ í‹°ì–´)
ì„ë² ë”©:        $0.00 (Gemini)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´í•©:          ì‘ì—…ë‹¹ $0.20
ì ˆê°ì•¡:        ì‘ì—…ë‹¹ $0.17 ì ˆê° (46% ì ˆê°)
ì œí•œ:          ë¬´ë£Œ í‹°ì–´ ê¸°ì¤€ í•˜ë£¨ ì•½ 500ê±´
```

### ì˜µì…˜ 3: ONNX Local (ì‹¤í—˜ì )

```yaml
reasoningbank:
  judge:
    model: "onnx/phi-4"                # ë¡œì»¬ ($0)
    max_tokens: 512

  distill:
    model: "onnx/phi-4"                # ë¡œì»¬ ($0)
    max_tokens: 2048

  embeddings:
    provider: "onnx"
    model: "onnx/phi-4"                # ë¡œì»¬
```

**ìƒˆë¡œìš´ ë¹„ìš©:**
```
ì£¼ìš” ì‘ì—…:     $0.20 (Claude)
Judge:         $0.00 (ë¡œì»¬ Phi-4)
Distill:       $0.00 (ë¡œì»¬ Phi-4)
ì„ë² ë”©:        $0.00 (ë¡œì»¬)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´í•©:          ì‘ì—…ë‹¹ $0.20
ì ˆê°ì•¡:        ì‘ì—…ë‹¹ $0.17 ì ˆê°
ì£¼ì˜:          í’ˆì§ˆì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆê³  ì†ë„ê°€ ëŠë¦½ë‹ˆë‹¤
```

## ğŸš€ ë¹ ë¥¸ ì„¤ì • (ê¸°ì¡´ í‚¤ ì‚¬ìš©)

ì´ë¯¸ `.env`ì— í‚¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```bash
# 1. ì„¤ì • íŒŒì¼ ìƒì„±
mkdir -p .swarm
cat > .swarm/reasoningbank.yaml << 'EOF'
reasoningbank:
  judge:
    model: "deepseek/deepseek-r1"
    max_tokens: 512
    temperature: 0

  distill:
    model: "deepseek/deepseek-r1"
    max_tokens: 2048
    temperature: 0.3

  embeddings:
    provider: "openrouter"
    model: "deepseek/deepseek-r1"
    dimensions: 1024
EOF

# 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cd /tmp && mkdir cost-test && cd cost-test
export ANTHROPIC_API_KEY="sk-ant-..."
export OPENROUTER_API_KEY="sk-or-v1-..."

# ë©”ëª¨ë¦¬ ì‘ì—…ì— ì €ë ´í•œ ëª¨ë¸ ì‚¬ìš©
npx agentic-flow --agent coder \
  --task "Write hello world function" \
  --enable-memory \
  --provider anthropic

# 3. ì ìš© ì—¬ë¶€ í™•ì¸
npx agentic-flow reasoningbank status
```

## ğŸ“Š í’ˆì§ˆ ëŒ€ë¹„ ë¹„ìš© íŠ¸ë ˆì´ë“œì˜¤í”„

| ëª¨ë¸             | ì‘ì—…ë‹¹ ë¹„ìš© | í’ˆì§ˆ   | ì†ë„    | ìµœì  ìš©ë„            |
|-------------------|-----------|---------|---------|----------------------|
| Claude 3.5 Sonnet | $0.15     | â­â­â­â­â­ | ë¹ ë¦„    | ì¤‘ìš”í•œ ì‘ì—…          |
| DeepSeek R1       | $0.003    | â­â­â­â­  | ë¹ ë¦„    | ê¶Œì¥ ì˜µì…˜            |
| Gemini 2.5 Flash  | $0.00     | â­â­â­   | ê°€ì¥ ë¹ ë¦„ | ëŒ€ëŸ‰ ì²˜ë¦¬ (ë¬´ë£Œ)     |
| ONNX Phi-4        | $0.00     | â­â­     | ëŠë¦¼    | í”„ë¼ì´ë²„ì‹œ ì¤‘ìš” í™˜ê²½ |

## ğŸ§ª ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë¹„êµ

### í…ŒìŠ¤íŠ¸ 1: ëª¨ë“  ì‘ì—…ì„ Claudeë¡œ ì‹¤í–‰
```bash
claude-flow agent run coder "Build API" --enable-memory

ì†Œìš” ì‹œê°„: 19,036ms
ë¹„ìš©: $0.37
ìƒì„±ëœ ë©”ëª¨ë¦¬: 2
í’ˆì§ˆ: ìµœìƒ
```

### í…ŒìŠ¤íŠ¸ 2: Claude + DeepSeek (í•˜ì´ë¸Œë¦¬ë“œ)
```bash
# ë™ì¼í•œ ì‘ì—…ì„ í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰
claude-flow agent run coder "Build API" --enable-memory

ì†Œìš” ì‹œê°„: 18,522ms (ìœ ì‚¬)
ë¹„ìš©: $0.20 (46% ì ˆê°)
ìƒì„±ëœ ë©”ëª¨ë¦¬: 2
í’ˆì§ˆ: ë§¤ìš° ì¢‹ìŒ (ì°¨ì´ ë¯¸ë¯¸)
```

## ğŸ’¡ ëª¨ë²” ì‚¬ë¡€

### 1. í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ ë°©ì‹ ì‚¬ìš©
```yaml
# ì£¼ìš” ì‘ì—…ì—ëŠ” ë†’ì€ í’ˆì§ˆ ìœ ì§€
main_provider: anthropic
main_model: claude-3-5-sonnet-20241022

# ë©”ëª¨ë¦¬ ì‘ì—…ì—ëŠ” ì €ë ´í•œ ëª¨ë¸ ì‚¬ìš©
reasoningbank:
  judge:
    model: "deepseek/deepseek-r1"
  distill:
    model: "deepseek/deepseek-r1"
```

### 2. ì²˜ë¦¬ëŸ‰ì— ë§ì¶° ì¡°ì •

**ì €ìš©ëŸ‰ (<ì¼ì¼ 50ê±´):**
- ëª¨ë“  ì‘ì—…ì„ Claudeë¡œ ì²˜ë¦¬
- í’ˆì§ˆì„ ë¹„ìš©ë³´ë‹¤ ìš°ì„ ì‹œí•©ë‹ˆë‹¤

**ì¤‘ê°„ ìš©ëŸ‰ (ì¼ì¼ 50~500ê±´):**
- Judge/Distillì— DeepSeek ì‚¬ìš©
- í•˜ë£¨ ì•½ $8.50 ì ˆê°

**ëŒ€ìš©ëŸ‰ (ì¼ì¼ 500ê±´ ì´ìƒ):**
- Gemini ë¬´ë£Œ í‹°ì–´ ì‚¬ìš©
- í•˜ë£¨ ì•½ $85 ì ˆê° (ì™„ì „ ë¬´ë£Œ)

### 3. í’ˆì§ˆ ëª¨ë‹ˆí„°ë§

```bash
# ì €ë ´í•œ ëª¨ë¸ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
npx agentic-flow reasoningbank list --sort confidence

# confidenceê°€ 0.6 ì´í•˜ë¡œ ë–¨ì–´ì§€ë©´ ëª¨ë¸ ìƒí–¥
# ì–‘í˜¸: í‰ê·  confidence > 0.7
# ë¶ˆëŸ‰: í‰ê·  confidence < 0.5
```

## ğŸ¯ ê¶Œì¥ êµ¬ì„±

ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ìì—ê²ŒëŠ” (í’ˆì§ˆê³¼ ë¹„ìš©ì˜ ê· í˜•):

```yaml
# .swarm/reasoningbank.yaml
reasoningbank:
  # ë©”ëª¨ë¦¬ ì‘ì—…ì—ëŠ” ì €ë ´í•œ ëª¨ë¸ ì‚¬ìš©
  judge:
    model: "deepseek/deepseek-r1"
    max_tokens: 512
    temperature: 0

  distill:
    model: "deepseek/deepseek-r1"
    max_tokens: 2048
    temperature: 0.3

  embeddings:
    provider: "openrouter"
    model: "deepseek/deepseek-r1"
    dimensions: 1024

  # ì‹¤ì œ ì‘ì—…ì—ëŠ” ë†’ì€ í’ˆì§ˆ ìœ ì§€
  # (ë©”ì¸ ì‘ì—…ì€ --provider anthropicìœ¼ë¡œ ì„¤ì •)
```

ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:
```bash
# ì£¼ìš” ì‘ì—…ì€ Claudeë¡œ ìˆ˜í–‰ (í’ˆì§ˆ ìœ ì§€)
# ë©”ëª¨ë¦¬ ì‘ì—…ì€ DeepSeekìœ¼ë¡œ ìˆ˜í–‰ (ì €ë ´)
claude-flow agent run coder "Your task" \
  --provider anthropic \
  --enable-memory

# ë¹„ìš©: $0.20 vs $0.37 (46% ì ˆê°!)
```

## ğŸ“ˆ ROI ê³„ì‚°ê¸°

í•˜ë£¨ ì‘ì—… ìˆ˜: 100
Claudeë§Œ ì‚¬ìš©í•  ë•Œ ë¹„ìš©: 100 Ã— $0.37 = $37/ì¼
í•˜ì´ë¸Œë¦¬ë“œ ì‚¬ìš© ì‹œ ë¹„ìš©: 100 Ã— $0.20 = $20/ì¼
ì›”ê°„ ì ˆê°ì•¡: $510/ì›”
ì—°ê°„ ì ˆê°ì•¡: $6,205/ë…„

## ğŸ” ê²€ì¦

ì €ë ´í•œ ëª¨ë¸ë¡œ ì „í™˜í•œ í›„ í’ˆì§ˆì„ ê²€ì¦í•˜ì„¸ìš”:

```bash
# ë™ì¼í•œ ì‘ì—…ì„ 3íšŒ ì‹¤í–‰
for i in 1 2 3; do
  claude-flow agent run coder "Test task $i" --enable-memory
done

# ë©”ëª¨ë¦¬ í’ˆì§ˆ í™•ì¸
claude-flow agent memory list --sort confidence

# ì–‘í˜¸: ëª¨ë“  ë©”ëª¨ë¦¬ confidence > 0.6
# ë¶ˆëŸ‰: ë©”ëª¨ë¦¬ confidence < 0.5 (ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ í•„ìš”)
```

## âš ï¸ ì£¼ì˜ ì‚¬í•­

### DeepSeek R1:
- âœ… ë›°ì–´ë‚œ ì¶”ë¡  ëŠ¥ë ¥
- âœ… 99% ë¹„ìš© ì ˆê°
- âœ… ë¹ ë¥¸ ì‘ë‹µ ì†ë„
- âš ï¸ ë§¤ìš° ë¯¸ë¬˜í•œ íŒë‹¨ì—ì„œëŠ” ì–´ë ¤ì›€ì„ ê²ªì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤

### Gemini ë¬´ë£Œ í‹°ì–´:
- âœ… í•˜ë£¨ 1500 ìš”ì²­ê¹Œì§€ ë¬´ë£Œ
- âœ… ë¹ ë¥¸ ì†ë„
- âš ï¸ ê¸‰ì¦í•˜ëŠ” ìš”ì²­ ì‹œ Rate limitì— ë„ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- âš ï¸ DeepSeekë³´ë‹¤ í’ˆì§ˆì´ ì•½ê°„ ë‚®ìŠµë‹ˆë‹¤

### ONNX Local:
- âœ… 100% ë¬´ë£Œ
- âœ… í”„ë¼ì´ë²„ì‹œ ë³´ì¥
- âŒ ì†ë„ê°€ ë§¤ìš° ëŠë¦¼
- âŒ í’ˆì§ˆì´ ë‚®ìŒ
- âŒ 8GB ì´ìƒ RAM í•„ìš”

## ğŸ‰ ê²°ë¡ 

**í’ˆì§ˆ ì €í•˜ ì—†ì´ ReasoningBank ë¹„ìš©ì„ 46% ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:**

1. ì£¼ìš” ì‘ì—…ì€ Claude 3.5 Sonnetìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤ (í’ˆì§ˆ)
2. Judge/Distillì—ëŠ” DeepSeek R1ì„ ì‚¬ìš©í•©ë‹ˆë‹¤ (99% ì €ë ´)
3. ê²°ê³¼: ë™ì¼í•œ ì¶œë ¥ì— ì ˆë°˜ì˜ ë¹„ìš©

**ì„¤ì • ì‹œê°„: 2ë¶„**
**ì ˆê°ì•¡: í•˜ë£¨ 100ê±´ ê¸°ì¤€ ì—°ê°„ $6,000+ ì ˆê°**

---

**ë²„ì „**: 1.0.0
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-12
**ìƒíƒœ**: í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
